
    <!DOCTYPE html>
    <html lang="en">
    <head>
      <meta charset="utf-8">
    </head>
    <body>
      <script src="https://prakt.chemie.unibas.ch/~devereux/ngl-master/dist/ngl.js"></script>
      <script>
        var densFile = 'http://localhost:8884/ref/1_1_new-0.chk.d.cube'
        var espFile = 'http://localhost:8884/ref/1_1_new-0.chk.p.cube'
        var pdbFile = 'http://localhost:8884/ref/mol.pdb'

        document.addEventListener("DOMContentLoaded", function () {
          var stage = new NGL.Stage( "viewport", { backgroundColor: "white" } );
          Promise.all([
            stage.loadFile(pdbFile),
          ]).then(function(comp) {
            var pdbComp = comp[0]


            pdbComp.addRepresentation("ball+stick");
            pdbComp.addRepresentation("label",{labelType: "_fitname",
                                               color: "cyan"});
            stage.autoView();
          } );
        });

        document.addEventListener("DOMContentLoaded", function () {
          var stage2 = new NGL.Stage( "viewport2", { backgroundColor: "white" } )

          Promise.all([
            stage2.loadFile(densFile),
            stage2.loadFile(espFile)
          ]).then(function(comp) {
            var densComp = comp[0]
            var espComp = comp[1]


            densComp.addRepresentation("surface",{
                                                  surfaceType: "av", isolevel: "  0.0010",
                                                  isolevelType: 'value',
                                                  opacity: 0.95,
                                                  side: 'front',
                                                  colorScheme: 'volume',
                                                  colorVolume: espComp.volume,
                                                  colorScale: [ 0xff0000, 0xffff00, 0x00ff00, 0x00ffff, 0x0000ff ],
                                                  colorMode: 'rgb',
                                                  colorDomain: [  -0.0745,   0.0745 ]
                                                  });
            stage2.autoView();
            stage2.viewerControls.zoom(-0.5);
          } );
        });

      </script>
      <h3>NGL Cube File Visualization</h3>
      <table><tr><td>
      <div id="viewport" style="width:500px; height:500px;"></div><br><p>Atom numbering</p>
      </td><td>
      <div id="viewport2" style="width:500px; height:500px;"></div><br><p>ESP from /home/boittier/pydcm/models/amide1_test2/ref/1_1_new-0.chk.p.cube</p>
      </td></tr></table>
      <p><div id="viewer"></div></p>
      <script>
        document.getElementById("viewer").innerHTML = densFile;
      </script>
    </body>
    </html>
    